<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=generator content="Relearn 5.12.6+tip"><meta name=description content="Thinging for all things."><meta name=author content="programmingcat"><title>Smart Contracts - Thinging X</title><link href=http://thinkingx.xyz/blockchain/smart-contracts/index.html rel=canonical type=text/html title="Smart Contracts - Thinging X"><link href=/blockchain/smart-contracts/index.xml rel=alternate type=application/rss+xml title="Smart Contracts - Thinging X"><link href=/images/favicon.svg?1702389106 rel=icon type=image/svg+xml><link href=/css/fontawesome-all.min.css?1702389106 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css?1702389106 rel=stylesheet></noscript><link href=/css/nucleus.css?1702389106 rel=stylesheet><link href=/css/auto-complete.css?1702389106 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/auto-complete.css?1702389106 rel=stylesheet></noscript><link href=/css/perfect-scrollbar.min.css?1702389106 rel=stylesheet><link href=/css/fonts.css?1702389106 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css?1702389106 rel=stylesheet></noscript><link href=/css/theme.css?1702389106 rel=stylesheet><link href=/css/theme-learn.css?1702389106 rel=stylesheet id=variant-style><link href=/css/variant.css?1702389106 rel=stylesheet><link href=/css/print.css?1702389106 rel=stylesheet media=print><link href=/css/format-print.css?1702389106 rel=stylesheet><link href=/css/ie.css?1702389106 rel=stylesheet><script src=/js/url.js?1702389106></script>
<script src=/js/variant.js?1702389106></script>
<script>window.index_js_url="/index.search.js";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="http://thinkingx.xyz/",window.variants&&variants.init(["learn","relearn-light","relearn-dark","relearn-bright","neon","blue","green","red"])</script></head><body class="mobile-support print" data-url=/blockchain/smart-contracts/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>Overview</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/blockchain/index.html><span itemprop=name>Blockchain</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Smart Contracts</span><meta itemprop=position content="3"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=smart-contracts>Smart Contracts</h1><p>这里主要是关于智能合约。</p><ol><li>搞明白 hardhat</li><li>用 hardhat 和 openzeplin 写 erc20 合约，部署、运行等</li></ol><h2 id=开发工具框架>开发工具、框架</h2><blockquote><p>工欲善其事，必先利其器。</p></blockquote><h3 id=开发工具>开发工具</h3><ul><li><p><a href=https://remix.ethereum.org/ target=_blank>Remix</a> - 一个基于浏览器的 IDE，可以用来编写、编译、部署智能合约。</p><ul><li>Remix 内部也提供了一个交互式的学习 Solidity 的教程</li></ul></li><li><p>Visiual Studio Code & Solidity Extension - 一个 VSCode 的插件，可以用来编写、编译、部署智能合约。</p></li><li><p>Jetbrains 系列 IDE & Solidity Extension - 一个 Jetbrains 系列 IDE 的插件，可以用来编写、编译、部署智能合约。</p></li></ul><h3 id=开发框架>开发框架</h3><ul><li>Hardhat</li><li>OpenZeplin</li><li>Truffle</li><li><a href=https://docs.ethers.org/v6/ target=_blank>ether.js</a></li><li>Ganache</li><li>TypeScript & JavaScript & ES6 & Node.js</li></ul><h3 id=学习资源>学习资源</h3><ul><li><p>Solidity Documents</p><ul><li><a href=https://solidity-cn.readthedocs.io/zh/develop/introduction-to-smart-contracts.html target=_blank>中文版</a></li><li><a href=https://docs.soliditylang.org/en/v0.8.17/ target=_blank>英文版</a></li></ul></li><li><p><a href=https://www.wtf.academy/learning-center target=_blank>WTF 学院</a></p><ul><li><a href=https://github.com/AmazingAng/WTF-Solidity target=_blank>WTF-Solidity</a></li></ul></li><li><p><a href=https://goethereumbook.org/zh/ target=_blank>用 Go 来做以太坊开发</a> & <a href=https://goethereumbook.org/en/ target=_blank>Ethereum Development with Go</a></p></li><li><p><a href=https://github.com/33357/smartcontract-apps target=_blank>smartcontract-apps</a> - 分析市面上智能合约应用的架构与实现的仓库</p></li><li><p><a href=https://twitter.com/0xAA_Science target=_blank>0xAA</a></p></li><li><p><a href=https://twitter.com/SlowMist_Team target=_blank>SlowMist</a></p></li><li><p><a href=https://twitter.com/Dapp_Learning target=_blank>Dapp_Learning</a></p></li><li><p><a href=https://twitter.com/VitalikButerin target=_blank>Vitalik</a></p></li><li><p><a href=https://learnblockchain.cn target=_blank>登链</a></p></li><li><p><a href=https://t.me/scientistDAO target=_blank>科学家社区</a></p></li><li><p><a href=https://space.bilibili.com/286084162 target=_blank>崔棉大师</a></p></li></ul><h2 id=语法>语法</h2><h3 id=变量数据类型和可见性>变量，数据类型和可见性</h3><p>Solidity 有三种变量类型：</p><ul><li>状态变量</li><li>本地变量</li><li><a href=https://docs.soliditylang.org/en/v0.8.17/units-and-global-variables.html target=_blank>全局变量</a></li></ul><p>在 Solidity 的全局命名空间中，存在一些特殊的变量，可以在任何地方访问，不需要声明；主要提供一些区块链信息和通用的处理函数。</p><ol><li>区块和交易相关：<code>block.basefee</code>, <code>msg.sender</code>, <code>msg.data</code> (calldata), <code>msg.value</code>, <code>msg.sig</code>, <code>tx.gasprice</code>, <code>tx.origin</code>, <code>block.gaslimit</code>, <code>block.number</code>, <code>block.timestamp</code>, <code>block.difficulty</code>, <code>block.coinbase</code>, <code>block.chainid</code>, <code>blockhash(uint blockNumber) returns (bytes32)</code>, <code>gasleft() returns (uint256)</code></li><li>abi 编解码函数</li><li>错误处理：<code>assert</code>, <code>require</code>, <code>revert</code></li><li>数学和加密函数：<code>keccak256</code>, <code>sha256</code>, <code>ripemd160</code>, <code>ecrecover</code>, <code>addmod</code>, <code>mulmod</code> 等等</li><li>地址类型：<code>&lt;address>.balance</code>, <code>&lt;address>.code</code> 等等</li><li>合约相关：<code>this</code>, <code>selfdestruct(address recipient)</code></li></ol><h3 id=storage-memory-calldata>storage, memory, calldata</h3><p>Solidity 中有几种变量的存储类型</p><ol><li>memory: 一些被临时使用的变量，比如函数参数、本地变量、在执行过程中动态创建的数组；一旦函数执行完毕，这些变量就会被销毁。</li><li>storage</li><li>calldata</li></ol><ul><li><a href=https://docs.alchemy.com/docs/what-is-the-difference-between-memory-and-calldata-in-solidity target=_blank>What is the difference between Memory and Calldata in Solidity?</a></li><li><a href=https://docs.alchemy.com/docs/when-to-use-storage-vs-memory-vs-calldata-in-solidity target=_blank>When to use Storage vs. Memory vs. Calldata in Solidity</a></li></ul><h3 id=函数-function>函数 (function)</h3><h3 id=payable-function>Payable function</h3><ul><li><a href=https://docs.alchemy.com/docs/solidity-payable-functions target=_blank>What are Payable Functions in Solidity?</a></li></ul><h2 id=合约安全>合约安全</h2><h2 id=eip>EIP</h2><h3 id=erc20>ERC20</h3><p>我们首先需要熟悉 ERC20 标准协议，可以看 <a href=https://eips.ethereum.org/EIPS/eip-20 target=_blank>ERC20 Token Standard</a>，非常重要。ERC20 标准规范可以获得更好的重用性，无论是对 web3 应用还是交易所。</p><p>接着可以了解 ERC20 的标准实现，可以看 <a href=https://docs.openzeppelin.com/contracts/3.x/api/token/erc20 target=_blank>OpenZeplin Contracts - ERC20</a> 部分，<a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol target=_blank>代码在这里</a></p><footer class=footline></footer></article></div></main></div><script src=/js/clipboard.min.js?1702389106 defer></script>
<script src=/js/perfect-scrollbar.min.js?1702389106 defer></script>
<script src=/js/d3/d3-color.min.js?1702389106 defer></script>
<script src=/js/d3/d3-dispatch.min.js?1702389106 defer></script>
<script src=/js/d3/d3-drag.min.js?1702389106 defer></script>
<script src=/js/d3/d3-ease.min.js?1702389106 defer></script>
<script src=/js/d3/d3-interpolate.min.js?1702389106 defer></script>
<script src=/js/d3/d3-selection.min.js?1702389106 defer></script>
<script src=/js/d3/d3-timer.min.js?1702389106 defer></script>
<script src=/js/d3/d3-transition.min.js?1702389106 defer></script>
<script src=/js/d3/d3-zoom.min.js?1702389106 defer></script>
<script src=/js/mermaid.min.js?1702389106 defer></script>
<script>window.themeUseMermaid=JSON.parse("{}")</script><script src=/js/theme.js?1702389106 defer></script></body></html>