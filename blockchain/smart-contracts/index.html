<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=generator content="Relearn 5.12.6+tip"><meta name=description content="Thinging for all things."><meta name=author content="programmingcat"><title>Smart Contracts - Thinging X</title><link href=/blockchain/smart-contracts/index.xml rel=alternate type=application/rss+xml title="Smart Contracts - Thinging X"><link href=/blockchain/smart-contracts/index.print.html rel=alternate type=text/html title="Smart Contracts - Thinging X"><link href=/images/favicon.svg?1699705923 rel=icon type=image/svg+xml><link href=/css/fontawesome-all.min.css?1699705923 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css?1699705923 rel=stylesheet></noscript><link href=/css/nucleus.css?1699705923 rel=stylesheet><link href=/css/auto-complete.css?1699705923 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/auto-complete.css?1699705923 rel=stylesheet></noscript><link href=/css/perfect-scrollbar.min.css?1699705923 rel=stylesheet><link href=/css/fonts.css?1699705923 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css?1699705923 rel=stylesheet></noscript><link href=/css/theme.css?1699705923 rel=stylesheet><link href=/css/theme-learn.css?1699705923 rel=stylesheet id=variant-style><link href=/css/variant.css?1699705923 rel=stylesheet><link href=/css/print.css?1699705923 rel=stylesheet media=print><link href=/css/ie.css?1699705923 rel=stylesheet><script src=/js/url.js?1699705923></script>
<script src=/js/variant.js?1699705923></script>
<script>window.index_js_url="/index.search.js";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="http://thinkingx.xyz/",window.variants&&variants.init(["learn","relearn-light","relearn-dark","relearn-bright","neon","blue","green","red"])</script></head><body class="mobile-support html" data-url=/blockchain/smart-contracts/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=/blockchain/web3/index.html title="Web3 (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=/blockchain/wallet/index.html title="Wallet (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=top-print-link><a class="print-link topbar-link" title='Print whole chapter (CTRL+ALT+p)' href=/blockchain/smart-contracts/index.print.html><i class="fas fa-print fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>Overview</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/blockchain/index.html><span itemprop=name>Blockchain</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Smart Contracts</span><meta itemprop=position content="3"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#开发工具框架>开发工具、框架</a><ul><li><a href=#开发工具>开发工具</a></li><li><a href=#开发框架>开发框架</a></li><li><a href=#学习资源>学习资源</a></li></ul></li><li><a href=#语法>语法</a><ul><li><a href=#变量数据类型和可见性>变量，数据类型和可见性</a></li><li><a href=#storage-memory-calldata>storage, memory, calldata</a></li><li><a href=#函数-function>函数 (function)</a></li><li><a href=#payable-function>Payable function</a></li></ul></li><li><a href=#合约安全>合约安全</a></li><li><a href=#eip>EIP</a><ul><li><a href=#erc20>ERC20</a></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=smart-contracts>Smart Contracts</h1><p>这里主要是关于智能合约。</p><ol><li>搞明白 hardhat</li><li>用 hardhat 和 openzeplin 写 erc20 合约，部署、运行等</li></ol><h2 id=开发工具框架>开发工具、框架</h2><blockquote><p>工欲善其事，必先利其器。</p></blockquote><h3 id=开发工具>开发工具</h3><ul><li><p><a href=https://remix.ethereum.org/ target=_blank>Remix</a> - 一个基于浏览器的 IDE，可以用来编写、编译、部署智能合约。</p><ul><li>Remix 内部也提供了一个交互式的学习 Solidity 的教程</li></ul></li><li><p>Visiual Studio Code & Solidity Extension - 一个 VSCode 的插件，可以用来编写、编译、部署智能合约。</p></li><li><p>Jetbrains 系列 IDE & Solidity Extension - 一个 Jetbrains 系列 IDE 的插件，可以用来编写、编译、部署智能合约。</p></li></ul><h3 id=开发框架>开发框架</h3><ul><li>Hardhat</li><li>OpenZeplin</li><li>Truffle</li><li><a href=https://docs.ethers.org/v6/ target=_blank>ether.js</a></li><li>Ganache</li><li>TypeScript & JavaScript & ES6 & Node.js</li></ul><h3 id=学习资源>学习资源</h3><ul><li><p>Solidity Documents</p><ul><li><a href=https://solidity-cn.readthedocs.io/zh/develop/introduction-to-smart-contracts.html target=_blank>中文版</a></li><li><a href=https://docs.soliditylang.org/en/v0.8.17/ target=_blank>英文版</a></li></ul></li><li><p><a href=https://www.wtf.academy/learning-center target=_blank>WTF 学院</a></p><ul><li><a href=https://github.com/AmazingAng/WTF-Solidity target=_blank>WTF-Solidity</a></li></ul></li><li><p><a href=https://goethereumbook.org/zh/ target=_blank>用 Go 来做以太坊开发</a> & <a href=https://goethereumbook.org/en/ target=_blank>Ethereum Development with Go</a></p></li><li><p><a href=https://github.com/33357/smartcontract-apps target=_blank>smartcontract-apps</a> - 分析市面上智能合约应用的架构与实现的仓库</p></li><li><p><a href=https://twitter.com/0xAA_Science target=_blank>0xAA</a></p></li><li><p><a href=https://twitter.com/SlowMist_Team target=_blank>SlowMist</a></p></li><li><p><a href=https://twitter.com/Dapp_Learning target=_blank>Dapp_Learning</a></p></li><li><p><a href=https://twitter.com/VitalikButerin target=_blank>Vitalik</a></p></li><li><p><a href=https://learnblockchain.cn target=_blank>登链</a></p></li><li><p><a href=https://t.me/scientistDAO target=_blank>科学家社区</a></p></li><li><p><a href=https://space.bilibili.com/286084162 target=_blank>崔棉大师</a></p></li></ul><h2 id=语法>语法</h2><h3 id=变量数据类型和可见性>变量，数据类型和可见性</h3><p>Solidity 有三种变量类型：</p><ul><li>状态变量</li><li>本地变量</li><li><a href=https://docs.soliditylang.org/en/v0.8.17/units-and-global-variables.html target=_blank>全局变量</a></li></ul><p>在 Solidity 的全局命名空间中，存在一些特殊的变量，可以在任何地方访问，不需要声明；主要提供一些区块链信息和通用的处理函数。</p><ol><li>区块和交易相关：<code>block.basefee</code>, <code>msg.sender</code>, <code>msg.data</code> (calldata), <code>msg.value</code>, <code>msg.sig</code>, <code>tx.gasprice</code>, <code>tx.origin</code>, <code>block.gaslimit</code>, <code>block.number</code>, <code>block.timestamp</code>, <code>block.difficulty</code>, <code>block.coinbase</code>, <code>block.chainid</code>, <code>blockhash(uint blockNumber) returns (bytes32)</code>, <code>gasleft() returns (uint256)</code></li><li>abi 编解码函数</li><li>错误处理：<code>assert</code>, <code>require</code>, <code>revert</code></li><li>数学和加密函数：<code>keccak256</code>, <code>sha256</code>, <code>ripemd160</code>, <code>ecrecover</code>, <code>addmod</code>, <code>mulmod</code> 等等</li><li>地址类型：<code>&lt;address>.balance</code>, <code>&lt;address>.code</code> 等等</li><li>合约相关：<code>this</code>, <code>selfdestruct(address recipient)</code></li></ol><h3 id=storage-memory-calldata>storage, memory, calldata</h3><p>Solidity 中有几种变量的存储类型</p><ol><li>memory: 一些被临时使用的变量，比如函数参数、本地变量、在执行过程中动态创建的数组；一旦函数执行完毕，这些变量就会被销毁。</li><li>storage</li><li>calldata</li></ol><ul><li><a href=https://docs.alchemy.com/docs/what-is-the-difference-between-memory-and-calldata-in-solidity target=_blank>What is the difference between Memory and Calldata in Solidity?</a></li><li><a href=https://docs.alchemy.com/docs/when-to-use-storage-vs-memory-vs-calldata-in-solidity target=_blank>When to use Storage vs. Memory vs. Calldata in Solidity</a></li></ul><h3 id=函数-function>函数 (function)</h3><h3 id=payable-function>Payable function</h3><ul><li><a href=https://docs.alchemy.com/docs/solidity-payable-functions target=_blank>What are Payable Functions in Solidity?</a></li></ul><h2 id=合约安全>合约安全</h2><h2 id=eip>EIP</h2><h3 id=erc20>ERC20</h3><p>我们首先需要熟悉 ERC20 标准协议，可以看 <a href=https://eips.ethereum.org/EIPS/eip-20 target=_blank>ERC20 Token Standard</a>，非常重要。ERC20 标准规范可以获得更好的重用性，无论是对 web3 应用还是交易所。</p><p>接着可以了解 ERC20 的标准实现，可以看 <a href=https://docs.openzeppelin.com/contracts/3.x/api/token/erc20 target=_blank>OpenZeplin Contracts - ERC20</a> 部分，<a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol target=_blank>代码在这里</a></p><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks"><div id=header-wrapper class=default-animation><div id=header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.9}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:1.875rem;font-weight:300;margin-top:-.8125rem;max-width:60%;text-transform:uppercase;width:14.125rem;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-1.25rem;margin-inline-start:-2.37rem;width:40.5%}@media only all and (max-width:60rem){a#logo{font-size:1.5625rem;margin-top:-.1875rem}#logo svg{margin-bottom:-.75rem;margin-inline-start:-2.37rem}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-3.625rem}#logo svg{margin-bottom:-3.875rem;margin-left:-2.37rem}}@media only all and (-ms-high-contrast:none) and (max-width:60rem){#logo svg{margin-left:-2.37rem}}</style><a id=logo href=/index.html><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path fill-rule="evenodd" clip-rule="evenodd" fill="#08c" d="M63.712 13.29 55.28 53.896C54.364 58.397 51.322 60 48.779 60c-1.312.0-2.674-.393-4.052-1.171l-.229-.131-.214-.16L26.75 45.302l-.659 7.735c-.344 1.807-1.988 3.105-3.859 2.951a3.634 3.634.0 01-3.091-2.32l-2.926-8.785A1.974 1.974.0 0116 44a2 2 0 012-2c.873.0 1.605.56 1.879 1.338.002.0.005-.002.007-.005l2.402 7.215.352-4.129v-.007a4.806 4.806.0 015.183-4.396c.873.07 1.666.381 2.335.847l16.535 12.482c.77.434 1.47.654 2.086.654 1.277.0 2.184-.95 2.581-2.901l8.448-40.682c.69-2.82-.559-4.416-2.24-4.416-.429.0-.885.104-1.348.317L6.616 27.864c-3.387 1.389-3.367 3.318-.618 4.177l8.199 2.616c.002.0.01-.005.012-.003a2.087 2.087.0 001.733-.223c.01-.005.017-.003.026-.008l21.938-13.825a3.997 3.997.0 015.474 1.261 3.993 3.993.0 01-.468 4.87L31.414 38.226v.002l-.031.029-.002-.002a1.988 1.988.0 01-1.379.558 2 2 0 01-2-2c0-.536.213-1.021.558-1.38l-.002-.002 11.394-11.396-21.937 13.824a6.105 6.105.0 01-5.023.604c-.012-.005-.024.0-.037-.005l-8.15-2.599C.51 34.516.046 31.403.005 30.482c-.065-1.552.506-4.438 5.093-6.32l.024-.01.026-.01 49.515-19.51A7.148 7.148.0 0157.568 4c1.959.0 3.766.87 4.958 2.391 1.4 1.779 1.819 4.227 1.186 6.899zM30 50a2 2 0 11.001 3.999A2 2 0 0130 50z"/></svg>Thinging X</a></div><form action=/search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["en"]</script><script src=/js/auto-complete.js?1699705923 defer></script>
<script src=/js/lunr/lunr.min.js?1699705923 defer></script>
<script src=/js/lunr/lunr.stemmer.support.min.js?1699705923 defer></script>
<script src=/js/lunr/lunr.multi.min.js?1699705923 defer></script>
<script src=/js/lunr/lunr.en.min.js?1699705923 defer></script>
<script src=/js/search.js?1699705923 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=/index.html><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics enlarge morespace"><li data-nav-id=/basics/index.html><a class=padding href=/basics/index.html>CS<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blockchain/index.html class=parent><a class=padding href=/blockchain/index.html>Blockchain<i class="fas fa-check read-icon"></i></a><ul id=subsections-6845414cdc469896cc30165e380617ad class=morespace><li data-nav-id=/blockchain/0-introduction/index.html><a class=padding href=/blockchain/0-introduction/index.html>Blockchain introduction<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blockchain/bitcoin/index.html><a class=padding href=/blockchain/bitcoin/index.html>Bitcoin<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blockchain/ethereum/index.html class=alwaysopen><a class=padding href=/blockchain/ethereum/index.html>Ethereum<i class="fas fa-check read-icon"></i></a><ul id=subsections-0cd75c694f257ed5c500ac3ff7d0654c class=morespace><li data-nav-id=/blockchain/ethereum/networks/index.html><a class=padding href=/blockchain/ethereum/networks/index.html>Ethereum Networks<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/blockchain/wallet/index.html><a class=padding href=/blockchain/wallet/index.html>Wallet<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blockchain/smart-contracts/index.html class=active><a class=padding href=/blockchain/smart-contracts/index.html>Smart Contracts<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blockchain/web3/index.html class=alwaysopen><a class=padding href=/blockchain/web3/index.html>Web3<i class="fas fa-check read-icon"></i></a><ul id=subsections-b0668cdabac933a918b42805e47b1a48 class=morespace><li data-nav-id=/blockchain/web3/infra/index.html><a class=padding href=/blockchain/web3/infra/index.html>Web3 基础设施及工具<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/distribute-service/index.html><a class=padding href=/distribute-service/index.html>Distribute Service<i class="fas fa-check read-icon"></i></a><ul id=subsections-bd8571a007c86567b085e37b619e576e class=morespace><li data-nav-id=/distribute-service/backend-storage/index.html class=alwaysopen><a class=padding href=/distribute-service/backend-storage/index.html>Backend Storage<i class="fas fa-check read-icon"></i></a><ul id=subsections-5bbba5edea3130cf3459afd24e2ce5e9 class=morespace><li data-nav-id=/distribute-service/backend-storage/cache/index.html><a class=padding href=/distribute-service/backend-storage/cache/index.html>Cache Design Overview<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/distribute-service/bff/index.html><a class=padding href=/distribute-service/bff/index.html>Backend for Frontend<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/programming-language/index.html><a class=padding href=/programming-language/index.html>Programming Language<i class="fas fa-check read-icon"></i></a><ul id=subsections-8acaf2f210ff08632c34c5604304a4dc class=morespace><li data-nav-id=/programming-language/java/index.html class=alwaysopen><a class=padding href=/programming-language/java/index.html>Java<i class="fas fa-check read-icon"></i></a><ul id=subsections-bd2c428c63e589861e5f4f61782e1e45 class=morespace><li data-nav-id=/programming-language/java/jdk-new-features/index.html><a class=padding href=/programming-language/java/jdk-new-features/index.html>JDK New Features<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/programming-language/java/jvm/index.html><a class=padding href=/programming-language/java/jvm/index.html>jvm<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/programming-language/golang/index.html><a class=padding href=/programming-language/golang/index.html>Golang<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><div id=shortcuts><div class="nav-title padding"></div><ul class=space><li><a class=padding href=https://github.com/shniu><i class='fab fa-fw fa-github'></i> GitHub</a></li><li><a class=padding href=/more/projects/index.html><i class='fas fa-fw fa-bookmark'></i> Projects</a></li><li><a class=padding href=/tags/index.html><i class='fas fa-fw fa-tags'></i> Tags</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showVisitedLinks showFooter"></div><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch showVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=learn value=learn selected>Learn</option><option id=relearn-light value=relearn-light>Relearn Light</option><option id=relearn-dark value=relearn-dark>Relearn Dark</option><option id=relearn-bright value=relearn-bright>Relearn Bright</option><option id=neon value=neon>Neon</option><option id=blue value=blue>Blue</option><option id=green value=green>Green</option><option id=red value=red>Red</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i><span>&nbsp;</span>Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/clipboard.min.js?1699705923 defer></script>
<script src=/js/perfect-scrollbar.min.js?1699705923 defer></script>
<script src=/js/d3/d3-color.min.js?1699705923 defer></script>
<script src=/js/d3/d3-dispatch.min.js?1699705923 defer></script>
<script src=/js/d3/d3-drag.min.js?1699705923 defer></script>
<script src=/js/d3/d3-ease.min.js?1699705923 defer></script>
<script src=/js/d3/d3-interpolate.min.js?1699705923 defer></script>
<script src=/js/d3/d3-selection.min.js?1699705923 defer></script>
<script src=/js/d3/d3-timer.min.js?1699705923 defer></script>
<script src=/js/d3/d3-transition.min.js?1699705923 defer></script>
<script src=/js/d3/d3-zoom.min.js?1699705923 defer></script>
<script src=/js/mermaid.min.js?1699705923 defer></script>
<script>window.themeUseMermaid=JSON.parse("{}")</script><script src=/js/theme.js?1699705923 defer></script></body></html>