<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />









  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一个人并不是生来要给打败的，你尽可以的消灭他，可就是打不败他">
<meta property="og:type" content="website">
<meta property="og:title" content="ChainTech">
<meta property="og:url" content="http://shniu.github.io/index.html">
<meta property="og:site_name" content="ChainTech">
<meta property="og:description" content="一个人并不是生来要给打败的，你尽可以的消灭他，可就是打不败他">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ChainTech">
<meta name="twitter:description" content="一个人并不是生来要给打败的，你尽可以的消灭他，可就是打不败他">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shniu.github.io/"/>





  <title> ChainTech </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ChainTech</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">知其所以然</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2018/02/26/Using-Go-as-a-scripting-language-in-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/26/Using-Go-as-a-scripting-language-in-linux/" itemprop="url">
                  Using-go-as-a-scripting-language-in-linux
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-26T07:00:00+08:00">
                2018-02-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="在-Linux-中使用-Go-作为脚本语言"><a href="#在-Linux-中使用-Go-作为脚本语言" class="headerlink" title="在 Linux 中使用 Go 作为脚本语言"></a>在 Linux 中使用 Go 作为脚本语言</h1><p>在 <code>Cloudflare</code> 的人们都非常喜欢 Go 语言。我们在许多<a href="https://blog.cloudflare.com/what-weve-been-doing-with-go/" target="_blank" rel="external">内部软件项目</a>以及更大的<a href="https://blog.cloudflare.com/meet-gatebot-a-bot-that-allows-us-to-sleep/" target="_blank" rel="external">管道系统</a>中使用它。但是，我们能否进入下一个层次并将其用作我们最喜欢的操作系统Linux的脚本语言呢？</p>
<p><img src="https://github.com/shniu/resources/raw/master/images/gopher-tux-1.png" alt="image here"></p>
<h2 id="为什么考虑将-Go-作为脚本语言"><a href="#为什么考虑将-Go-作为脚本语言" class="headerlink" title="为什么考虑将 Go 作为脚本语言"></a>为什么考虑将 Go 作为脚本语言</h2><p>简短点的回答：为什么不呢？Go 相对容易学习，不冗余并且有一个强大的生态库，这些库可以重复使用避免我们从头开始编写所有代码。它可能带来的一些其他潜在优势：</p>
<ul>
<li><p>为你的 Go 项目提供一个基于 Go 的构建系统：<code>go build</code> 命令主要适用于小型自包含项目。更复杂的项目通常采用构建系统或脚本集。为什么不用 Go 编写这些脚本呢？</p>
</li>
<li><p>易于使用的非特权包管理：如果你想在脚本中使用第三方库，你可以简单的使用 <code>go get</code> 命令来获取。而且由于拉取的代码将安装在你的 <code>GOPATH</code> 中，使用一些第三方库并不需要系统管理员的权限（与其他一些脚本语言不同）。这在大型企业环境中尤其有用。</p>
</li>
<li><p>在早期项目阶段进行快速的代码原型设计：当您进行第一次代码迭代时，通常需要进行大量的编辑，甚至进行编译，而且您必须在 “编辑-&gt;构建-&gt;检查” 循环中浪费大量的按键。相反，使用 Go，您可以跳过 <code>build</code> 部分，并立即执行源文件。</p>
</li>
<li><p>强类型的脚本语言：如果你在脚本中的某个地方有个小的输入错误，大多数的脚本语言都会执行到有错误的地方然后停止。这可能会让你的系统处于不一致的状态（因为有些语句的执行会改变数据的状态，从而污染了执行脚本之前的状态）。使用强类型语言时，许多拼写错误可以在编译时被捕获，因此有 bug 的脚本将不会首先运行。</p>
</li>
</ul>
<h2 id="Go-脚本的当前状态"><a href="#Go-脚本的当前状态" class="headerlink" title="Go 脚本的当前状态"></a>Go 脚本的当前状态</h2><p>咋一看 Go 脚本貌似很容易实现 Unix 脚本的 shebang(#! …) 支持。<a href="https://en.wikipedia.org/wiki/Shebang_(Unix" target="_blank" rel="external">shebang 行</a>)是脚本的第一行，以 <code>#!</code> 开头，并指定脚本解释器用于执行脚本（例如，<code>#!/bin/bash</code> 或 <code>#!/usr/bin/env python</code>），所以无论使用何种编程语言，系统都确切知道如何执行脚本。Go 已经使用 <code>go run</code> 命令支持 <code>.go</code> 文件的类似于解释器的调用，所以只需要添加适当的 shebang 行（<code>#!/usr/bin/env go run</code>）到任何的 <code>.go</code> 文件中，设置好文件的可执行状态，然后就可以愉快的玩耍了。</p>
<p>但是，直接使用 go run 还是有问题的。<a href="https://gist.github.com/posener/73ffd326d88483df6b1cb66e8ed1e0bd" target="_blank" rel="external">这篇牛 b 的文章</a>详细描述了围绕 <code>go run</code> 的所有问题和潜在解决方法，但其要点是：</p>
<ul>
<li><p><code>go run</code> 不能正确地将脚本错误代码返回给操作系统，这对脚本很重要，因为错误代码是多个脚本之间相互交互和操作系统环境最常见的方式之一。</p>
</li>
<li><p>你不能在有效的 <code>.go</code> 文件中创建一个 shebang 行，因为 Go 语言不知道如何处理以 <code>#</code> 开头的行。而其他语言不存在这个问题，是由于 <code>#</code> 大多数情况下是一种注释的方式，所以最后解释器会忽略掉 shebang 行，但是 Go 注释是以 <code>//</code> 开头的并且在调用时运行会产生如下错误：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">package main:</div><div class="line">helloscript.go:1:1: illegal character U+0023 &apos;#&apos;</div></pre></td></tr></table></figure>
<p><a href="https://gist.github.com/posener/73ffd326d88483df6b1cb66e8ed1e0bd" target="_blank" rel="external">这篇文章</a>描述了上述问题的几种解决方法，包括使用一个自定义的包装程序 <a href="https://github.com/erning/gorun" target="_blank" rel="external">gorun</a> 作为解释器，但是都没有提供一个理想的解决方案。你可以：</p>
<ul>
<li><p>必须使用非标准的 shebang 行，它以 <code>//</code> 开头。这在技术上甚至不是 shebang 行，而是 bash shell 如何处理可执行文本文件的方式，所以这个解决方案是 bash 特有的。另外，由于 <code>go run</code> 的具体行为，这一行相当复杂并且不够明显（请参阅原始文章的示例）。</p>
</li>
<li><p>必须在 shebang 行中使用 gorun 自定义包装程序，这很好，但是，最终得到的 <code>.go</code> 文件由于非法的 <code>#</code> 字符而不能与标准 <code>go build</code> 命令编译。</p>
</li>
</ul>
<h2 id="Linux-如何执行文件"><a href="#Linux-如何执行文件" class="headerlink" title="Linux 如何执行文件"></a>Linux 如何执行文件</h2><p>OK，看起来 shebang 的方法并没有为我们提供全面的解决方案。是否还有其他方式是我们可以使用的？让我们仔细看看 Linux 内核如何执行二进制文件。 当你尝试执行一个二进制/脚本（或任何有可执行位设置的文件）时，你的 shell 最后只会使用 Linux <code>execve</code> 系统调用，将它传递给二进制文件系统路径，命令行参数和 当前定义的环境变量。 然后内核负责正确解析文件并用文件中的代码创建一个新进程。 我们中的大多数人都知道 Linux （和许多其他类 Unix 操作系统）为其可执行文件使用 ELF 二进制格式。</p>
<p>然而，Linux 内核开发的核心原则之一是避免任何子系统的 “vendor/format lock-in”，这是内核的一部分。因此，Linux 实现了一个“可插拔”系统，它允许内核支持任何二进制格式 - 所有你需要做的就是编写一个正确的模块，它可以解析你选择的格式。如果仔细研究内核源代码，你会发现 Linux 支持更多的二进制格式。例如，最近的<code>4.14</code> Linux 内核，我们可以看到它至少支持7种二进制格式（用于各种二进制格式的树内模块通常在其名称中具有 <code>binfmt_</code> 前缀）。值得注意的是 <a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git/tree/fs/binfmt_script.c?h=linux-4.14.y" target="_blank" rel="external">binfmt_script</a> 模块，它负责解析上面提到的 shebang 行并在目标系统上执行脚本（并不是每个人都知道 shebang 支持实际上是在内核本身而不是在 shell 或其他守护进程/进程中实现的）。</p>
<h2 id="从用户空间扩展受支持的二进制格式"><a href="#从用户空间扩展受支持的二进制格式" class="headerlink" title="从用户空间扩展受支持的二进制格式"></a>从用户空间扩展受支持的二进制格式</h2><p>但既然我们认为 shebang 不是 Go 脚本的最佳选择，似乎我们需要别的东西。令人惊讶的是，Linux 内核已经有了一个“其他类型的”二进制支持模块，它有一个贴切的名称 <code>binfmt_misc</code>。该模块允许管理员通过定义良好的 <code>procfs</code> 接口直接从用户空间动态添加对各种可执行格式的支持，并且有详细记录。</p>
<p>让我们按照<a href="https://www.kernel.org/doc/html/v4.14/admin-guide/binfmt-misc.html" target="_blank" rel="external">文档</a>并尝试为 <code>.go</code> 文件设置二进制格式描述。首先，该指南告诉您将特殊的 <code>binfmt_misc</code> 文件系统安装到 <code>/proc/sys/fs/binfmt_misc</code>。如果您使用的是基于 systemd 的相对较新的 Linux 发行版，则很可能已经为您安装了文件系统，因为默认情况下 system 会为此安装特殊的 mount 和 automount 单元。 要仔细检查，只需运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mount | grep binfmt_misc</div><div class="line">systemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=27,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)</div></pre></td></tr></table></figure>
<p>另一种方法是检查 <code>/proc/sys/fs/binfmt_misc</code> 中是否有文件：正确安装 <code>binfmt_misc</code> 文件系统将至少创建两个名称为 <code>register</code> 和 <code>status</code> 的特殊文件。</p>
<p>接下来，因为我们希望我们的 .go 脚本能够正确地将退出代码传递给操作系统，所以我们需要将定制的 gorun 包装器作为我们的“解释器”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ go get github.com/erning/gorun</div><div class="line">$ sudo mv ~/go/bin/gorun /usr/local/bin/</div></pre></td></tr></table></figure>
<p>从技术角度上讲，我们不需要将 gorun 移动到 <code>/usr/local/bin</code> 或任何其他系统路径，而无论如何 <code>binfmt_misc</code> 都需要解释器的完整路径，但系统可以以任意权限运行此可执行文件，因此从安全视角来看限制文件访问权限是一个好主意。</p>
<p>在这一点上，让我们来建一个简单的 go 脚本 <code>helloscript.go</code> 并验证我们可以成功“解释”它。脚本如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">	<span class="string">"os"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	s := <span class="string">"world"</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">1</span> &#123;</div><div class="line">		s = os.Args[<span class="number">1</span>]</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	fmt.Printf(<span class="string">"Hello, %v!"</span>, s)</div><div class="line">	fmt.Println(<span class="string">""</span>)</div><div class="line"></div><div class="line">	<span class="keyword">if</span> s == <span class="string">"fail"</span> &#123;</div><div class="line">		os.Exit(<span class="number">30</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>检查参数传递和错误处理是否按预期工作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ gorun helloscript.go</div><div class="line">Hello, world!</div><div class="line">$ echo $?</div><div class="line">0</div><div class="line">$ gorun helloscript.go gopher</div><div class="line">Hello, gopher!</div><div class="line">$ echo $?</div><div class="line">0</div><div class="line">$ gorun helloscript.go fail</div><div class="line">Hello, fail!</div><div class="line">$ echo $?</div><div class="line">30</div></pre></td></tr></table></figure>
<p>现在我们需要告诉 <code>binfmt_misc</code> 模块如何使用 <code>gorun</code> 执行 <code>.go</code> 文件。按照文档中的描述我们需要配置如下字符串： <code>:golang:E::go::/usr/local/bin/gorun:OC</code>，意思是告诉系统：当遇到以 <code>.go</code> 为扩展名的可执行文件，请使用 <code>/usr/local/bin/gorun</code> 解释器执行该文件。字符串末尾的 <code>OC</code> 标志确保脚本将根据脚本本身设置的所有者信息和权限位执行，而不是在解释器二进制文件上设置的那些位。这使 Go 脚本的执行行为与 Linux 中其他可执行文件和脚本的行为相同。</p>
<p>让我们注册我们新的 Go 脚本二进制格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ echo &apos;:golang:E::go::/usr/local/bin/gorun:OC&apos; | sudo tee /proc/sys/fs/binfmt_misc/register</div><div class="line">:golang:E::go::/usr/local/bin/gorun:OC</div></pre></td></tr></table></figure>
<p>如果系统成功注册了，则应在 <code>/proc/sys/fs/binfmt_misc</code> 目录下显示新的 golang 文件。 最后，我们可以在本地执行我们的 .go 文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ chmod u+x helloscript.go</div><div class="line">$ ./helloscript.go</div><div class="line">Hello, world!</div><div class="line">$ ./helloscript.go gopher</div><div class="line">Hello, gopher!</div><div class="line">$ ./helloscript.go fail</div><div class="line">Hello, fail!</div><div class="line">$ echo $?</div><div class="line">30</div></pre></td></tr></table></figure>
<p>就这样了！现在我们可以根据自己的喜好编辑 helloscript.go，并在下次执行文件时看到更改将立即可见。此外，和此前的 shebang 方式不同，我们可以随时使用 <code>go build</code> 将文件编译成真正的可执行文件。</p>
<hr>
<p>via：<a href="https://blog.cloudflare.com/using-go-as-a-scripting-language-in-linux/" target="_blank" rel="external">Using Go as a scripting language in Linux</a></p>
<ul>
<li><a href="https://github.com/shniu" target="_blank" rel="external">shniu</a></li>
<li><a href="https://digcredit.com/chaintechinfo" target="_blank" rel="external">chaintech.info</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/08/01/算法笔记1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/01/算法笔记1/" itemprop="url">
                  算法笔记1 - Encode and decode tinyURL
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-01T14:32:43+08:00">
                2017-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Question-description"><a href="#Question-description" class="headerlink" title="Question description"></a>Question description</h2><blockquote>
<p>TinyURL is a URL shortening service where you enter a URL such as <a href="https://leetcode.com/problems/design-tinyurl" target="_blank" rel="external">https://leetcode.com/problems/design-tinyurl</a> and it returns a short URL such as <a href="http://tinyurl.com/4e9iAk" target="_blank" rel="external">http://tinyurl.com/4e9iAk</a><br>Design the encode and decode methods for the TinyURL service. There is no restriction on how your encode/decode algorithm should work. You just need to ensure that a URL can be encoded to a tiny URL and the tiny URL can be decoded to the original URL.</p>
<p>Requirements:<br>For instance, “<a href="http://tinyurl.com/4e9iAk" target="_blank" rel="external">http://tinyurl.com/4e9iAk</a>“ is the tiny url for the page “<a href="https://leetcode.com/problems/design-tinyurl" target="_blank" rel="external">https://leetcode.com/problems/design-tinyurl</a>“. The identifier (the highlighted part) can be any string with 6 alphanumeric characters containing 0-9, a-z, A-Z.<br>Each shortened URL must be unique; that is, no two different URLs can be shortened to the same URL.</p>
</blockquote>
<p><a href="https://leetcode.com/problems/design-tinyurl/description/" target="_blank" rel="external">https://leetcode.com/problems/design-tinyurl/description/</a><br><a href="https://leetcode.com/problems/encode-and-decode-tinyurl/description/" target="_blank" rel="external">https://leetcode.com/problems/encode-and-decode-tinyurl/description/</a></p>
<p>一些讨论可以参考这里：<br><a href="https://leetcode.com/problems/design-tinyurl/discuss/" target="_blank" rel="external">discuss</a></p>
<p>这是一个有点意思的问题或叫需求，既可以单纯的把他当作一个简单的算法题来做做，也能复杂到我们需要大规模分布式系统去解决，取决于我们使用这个tinyURL services的场景是什么。当我们把他当作toy玩一玩的时候，十几行代码就解决了；如果我们把他做成服务千万上亿级别的用户时，每秒需要满足几百万，上千万，上亿次的请求时，他又是另外一帆景象。</p>
<blockquote>
<p>世界是奇妙的，当你发现他不一样的时候。</p>
</blockquote>
<h2 id="对于这件事情简单的处理"><a href="#对于这件事情简单的处理" class="headerlink" title="对于这件事情简单的处理"></a>对于这件事情简单的处理</h2><h4 id="字母随机组合法"><a href="#字母随机组合法" class="headerlink" title="字母随机组合法"></a>字母随机组合法</h4><p>简单到我们不关心任何复杂的事情，就是去实现Encode tinyURL and decode tinyURL，看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span><span class="params">(object)</span>:</span></div><div class="line">    base_domain = <span class="string">'http://tiny.com/'</span></div><div class="line">    </div><div class="line">    alphabet = string.ascii_letters + <span class="string">'0123456789'</span></div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.code_to_url = &#123;&#125;</div><div class="line">        self.url_to_code = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">encode</span><span class="params">(self, long_url)</span>:</span></div><div class="line">        <span class="keyword">while</span> long_url <span class="keyword">not</span> <span class="keyword">in</span> self.url_to_code:</div><div class="line">            code = <span class="string">''</span>.join(random.sample(self.alphabet, <span class="number">6</span>))</div><div class="line">            <span class="keyword">if</span> code <span class="keyword">not</span> <span class="keyword">in</span> self.code_to_url:</div><div class="line">                self.url_to_code[long_url] = code</div><div class="line">                self.code_to_url[code] = long_url</div><div class="line">                </div><div class="line">        <span class="keyword">return</span> <span class="string">'%s%s'</span> % (self.base_domain, self.url_to_code[long_url])</div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span><span class="params">(self, tiny_url)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.long_url[tiny_url[<span class="number">-6</span>:]]</div></pre></td></tr></table></figure>
<p>上面使用了一种组合<code>a-z</code>, <code>A-Z</code>, <code>0-9</code> 的方式生成short url，6位的组合有 (62)^6 = 570亿种，所以基本满足了需求上限；</p>
<h4 id="hash-function"><a href="#hash-function" class="headerlink" title="hash function"></a>hash function</h4><p>此外还有另外一种hash的方式，可以使用md5 or sha-1 的方式做hash运算，我们假设预估每个url的平均长度是20，每个字符占用2Bytes，那么总共需要40Bytes；首先如果使用md5会生成一个128位的二进制，一般会用32位的十六进制去表示，最终会占用16Bytes的空间；其次如果使用sha-1的方式去做hash，会生成一个160位的二进制，用40位的十六进制，使用20Byte就可以搞定存储；此法比较简单，hash的值也会比较随机，可以节省空间；但是这种方式会比较容易产生冲突，冲突之后就需要重新生成，也可以结合timestamp重新hash，但随着url增多时，冲突的机率会大幅增加，效率就会变得比较低。</p>
<h2 id="URLService系统级别的服务"><a href="#URLService系统级别的服务" class="headerlink" title="URLService系统级别的服务"></a>URLService系统级别的服务</h2><p>下面我再去深入的思考这个问题，假设场景是这样的：</p>
<ul>
<li>我们需要构建一个URLService的服务对外提供服务，面向全球</li>
<li>我们的QPS指标最弱也需要是下面这样的</li>
</ul>
<blockquote>
<p>QPS<br>  日活  10万<br>  日请求  写 300w，读 3000w<br>  响应时间500ms左右<br>  QPS  写 100，读 1K</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/04/22/深度学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/22/深度学习/" itemprop="url">
                  深度学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-22T18:50:55+08:00">
                2017-04-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="未知概念"><a href="#未知概念" class="headerlink" title="未知概念"></a>未知概念</h2><ul>
<li>神经网络</li>
<li>高数</li>
<li>线性代数</li>
</ul>
<h2 id="重要资源"><a href="#重要资源" class="headerlink" title="重要资源"></a>重要资源</h2><p><a href="https://www.zhihu.com/question/49909565" target="_blank" rel="external">tensorflow如何入门 - 知乎</a></p>
<p><a href="http://www.tensorflow.org" target="_blank" rel="external">tensorflow.org</a></p>
<p><a href="http://playground.tensorflow.org" target="_blank" rel="external">playground.tensorflow.org</a></p>
<p><a href="https://github.com/zsdonghao/tensorlayer" target="_blank" rel="external">https://github.com/zsdonghao/tensorlayer</a></p>
<h2 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h2><ul>
<li>tensorflow.org总是打不开的处理办法</li>
</ul>
<blockquote>
<p>修改 /etc/hosts 文件，加入<br>64.233.188.121 www.tensorflow.org</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/04/18/认知积累/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/认知积累/" itemprop="url">
                  认知积累
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T13:22:23+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="精准是企业的未来"><a href="#精准是企业的未来" class="headerlink" title="精准是企业的未来"></a>精准是企业的未来</h3><blockquote>
<p>企业做到了精准，才有机会进入下一轮的商业竞争；Google颠覆了传统广告，带来了创新，Google的广告投放、淘宝的推广投放；商业文明的DNA也具有双螺旋，分别是协同网络和数据智能。<br>协同网络：降低进入生态的门槛，一定是低门槛，以先进入的一批慢慢带动后来者，比如淘宝的生态，开始是一些边缘的人在做，比如大学生、失业的工人等；网络中的各组成部分之间能够自发的发展关系；<br>数据智能：在线化、记录尽可能多的数据，先不要管怎么用，将来肯定有用；<br>数据化是个昂贵的过程，谁有更有创意更优质获取数据的能力，谁就有更强的竞争力；<br>机器学习的的逻辑是否贯穿这个过程，是否能有更有的算法去解决接踵而来的问题；<br>一定要有持续不断的用户反馈、使用反馈，然后再去优化，再去收集反馈；<br>未来一定是有精准服务取胜的。  曾鸣</p>
</blockquote>
<h3 id="知识的正解"><a href="#知识的正解" class="headerlink" title="知识的正解"></a>知识的正解</h3><blockquote>
<p>所谓的知识，并不能给你带来任何的益处；信息本身并不是知识，堆叠在一起并不会自动产生有价值的、可供使用的知识，比如你知道的成语比别人多，这些大量的信息并不能帮你去做出比别人更好的决策，或对未来更好的关键选择；所以知识是那些能帮你做出更好决策，更好选择，能给你带来更加美好未来的信息；注意力比时间重要，时间比金钱重要；知识创造者和知识传播者，现在知识创造者更加重要；  李笑来</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/04/11/知识图谱/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/知识图谱/" itemprop="url">
                  知识图谱
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T21:10:55+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="知乎上的"><a href="#知乎上的" class="headerlink" title="知乎上的"></a>知乎上的</h4><blockquote>
<p>从头构建知识图谱，抛开应用不谈，就是获取结构化数据（并映射到本体）的过程；快速构建的方法，个人觉得最好的是从各种源头爬取结构化数据，涉及到几个过程：</p>
<ol>
<li>网页/数据的爬取，解析</li>
<li>清洗</li>
<li>消重，消歧<br>(<a href="https://www.zhihu.com/question/26385031" target="_blank" rel="external">https://www.zhihu.com/question/26385031</a>)</li>
</ol>
<p>方法的是清晰的，没有什么秘密。楼上各位都说的很清楚了：实体提取，关系提取，图谱存储和检索。知识图谱实践坑太多了，绝不是看看教科书就能学会的。这是很年轻的学科，目前还没有好的教材。关键是项目的目标控制和路径设计。科研项目，工程项目，大公司项目，小公司项目，大公司装逼项目，大公司现有产品改进项目，抢资金项目，预研试验项目。To B项目，To C项目，To VC项目，To G项目。那做法都是完全不同的。关键是成本控制，回报周期控制，和出钱的大爷的预期管理。在技术上做好演进的，可容忍低结构、高噪声、低质量数据，充分理解没有神奇的银弹。在团队上充分考虑到知识图谱人才稀缺性，尽量用现有的技术人才渐进推进。在资金管理上充分理解大爷们耐心是有限的，要快速迭代，快速出活。</p>
<p>真实的世界在人类的认知当中就是由实体、属性和实体间的关系构成的；获取这些东西的最大挑战无非就是实体识别、消歧（重名，别名）、实体关系挖掘等，这些归根到底都属于nlp的问题；所以说如果中文知识图谱的构建和英文的有什么区别的话，只能是中文和英文在自然语言处理技术上的差别比如处理语料时中文和英文分词的差别，这点中文更难，很多实体的指代直接被分成多个词，后面再想救回来又得另想办法；比如消歧的时候英文中有大量的缩写指代，同一个缩写对应很多可能的实体，这点英文比中文难；再比如关系挖掘的时候，个人感觉中文要更难一些，因为表述更丰富更不规律；综上，中文知识图谱的构建和英文的所谓区别，归根结底只在nlp这一块，其他的诸如步骤流程框架等等确实没啥差<br>当然，英文方面现成的东西更多一点，可以直接拿来用，中文就苦逼呵呵了…这会导致实施起来有所不同，在我看来这也算是一个很大的差别吧…</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/04/06/docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/06/docker/" itemprop="url">
                  docker in action
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T17:59:52+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Docker-入门"><a href="#Docker-入门" class="headerlink" title="Docker 入门"></a>Docker 入门</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 启动一个容器</div><div class="line">docker run -d -p 80:80 -v host_dir:container_dir --name web syph/web:1.0</div><div class="line"></div><div class="line"># 进入docker容器内部</div><div class="line">docker exec -it container_name /bin/bash</div></pre></td></tr></table></figure>
<h3 id="Question-to-be-answer"><a href="#Question-to-be-answer" class="headerlink" title="Question to be answer"></a>Question to be answer</h3><ul>
<li><p>image 在swarm cluster中共享的问题</p>
</li>
<li><p>配置文件动态配置到image中，并在每次更新配置文件只需要重启container即可，而不需要每次都build新的image</p>
</li>
</ul>
<h3 id="Basic-operator"><a href="#Basic-operator" class="headerlink" title="Basic operator"></a>Basic operator</h3><p><a href="https://docs.docker.com/engine/getstarted/step_four/" target="_blank" rel="external">https://docs.docker.com/engine/getstarted/step_four/</a></p>
<p><a href="http://www.dockerinfo.net/2117.html" target="_blank" rel="external">Docker技术架构详细分析 Docker模块分析</a></p>
<p><a href="http://blog.leanote.com/post/dongkui0712@foxmail.com/api-v2" target="_blank" rel="external">Docker Registry HTTP API V2翻译</a></p>
<p><a href="http://blog.csdn.net/mideagroup/article/details/52052618" target="_blank" rel="external">使用官方 docker registry 搭建私有镜像仓库及部署 web ui</a></p>
<p><a href="http://www.dockerinfo.net/4471.html" target="_blank" rel="external">专家深入剖析Docker容器常见攻击手法与防护对策</a></p>
<p><a href="http://www.dockerinfo.net/4193.html" target="_blank" rel="external">Docker for Devs — 如何将应用容器化</a></p>
<p><a href="http://www.dockerinfo.net/4374.html" target="_blank" rel="external">Docker Swarm架构、特性与基本实践</a></p>
<p><a href="http://www.dockerinfo.net/4334.html" target="_blank" rel="external">创建docker swarm应用</a></p>
<h3 id="Deploy-a-stack-to-a-swarm"><a href="#Deploy-a-stack-to-a-swarm" class="headerlink" title="Deploy a stack to a swarm"></a>Deploy a stack to a swarm</h3><p><a href="https://docs.docker.com/engine/swarm/stack-deploy/" target="_blank" rel="external">https://docs.docker.com/engine/swarm/stack-deploy/</a>这篇文章讲了部署到swarm的全过程</p>
<p><a href="https://blog.couchbase.com/deploy-docker-compose-services-swarm/" target="_blank" rel="external">https://blog.couchbase.com/deploy-docker-compose-services-swarm/</a>  Deploy Docker Compose Services to Swarm</p>
<p><a href="https://technologyconversations.com/2017/01/23/using-docker-stack-and-compose-yaml-files-to-deploy-swarm-services/" target="_blank" rel="external">https://technologyconversations.com/2017/01/23/using-docker-stack-and-compose-yaml-files-to-deploy-swarm-services/</a></p>
<h3 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h3><blockquote>
<p>Ignoring unsupported options: build in v1.13.0-rc4</p>
</blockquote>
<p><a href="https://github.com/docker/docker/issues/29940" target="_blank" rel="external">https://github.com/docker/docker/issues/29940</a><br><a href="https://github.com/docker/docker/issues/29133#issuecomment-270901505" target="_blank" rel="external">https://github.com/docker/docker/issues/29133#issuecomment-270901505</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">The docker stack deploy feature, by design does not perform builds. </div><div class="line">Reason for this is that a build is performed on the host that the command is run from, so the image will only be available on that node. </div><div class="line">When deploying that image in a Swarm, the service cannot be started on other nodes. </div><div class="line">To deploy services, make sure the image you&apos;re deploying is pushed to a registry (or for testing; make sure the image is available on every node in the swarm)</div></pre></td></tr></table></figure>
<blockquote>
<p>Inconsistent ‘image’ behavior on update  docker unable to pin image</p>
</blockquote>
<p><a href="https://github.com/docker/docker/issues/29295" target="_blank" rel="external">https://github.com/docker/docker/issues/29295</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">有了这个warnning也没关系，可以正常跑服务</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/03/31/汇总精华文章/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/汇总精华文章/" itemprop="url">
                  不积硅步，无以至千里
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-31T17:01:30+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote><p>两点之间最短的距离是恶性循环</p>
</blockquote>
<h2 id="大数据处理技术"><a href="#大数据处理技术" class="headerlink" title="大数据处理技术"></a>大数据处理技术</h2><ul>
<li><a href="https://spark.apache.org/docs/latest/programming-guide.html#transformations" target="_blank" rel="external">spark官方文档</a></li>
</ul>
<h2 id="人工智能"><a href="#人工智能" class="headerlink" title="人工智能"></a>人工智能</h2><h2 id="Vuejs"><a href="#Vuejs" class="headerlink" title="Vuejs"></a>Vuejs</h2><ul>
<li><a href="https://github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md" target="_blank" rel="external">Vuejs编码规范</a></li>
<li><a href="https://github.com/lin-xin/vue-manage-system" target="_blank" rel="external">Vue2.x和Element-ui开发的后台管理系统</a></li>
<li><a href="https://github.com/ElementUI/awesome-element" target="_blank" rel="external">awesome-element</a></li>
<li><a href="https://github.com/taylorchen709/vue-admin" target="_blank" rel="external">vue-admin-element</a></li>
<li><a href="http://www.jianshu.com/c/c71f9c127c71" target="_blank" rel="external">element-ui分析的系列文章</a></li>
</ul>
<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p><a href="http://feisky.xyz/docker/" target="_blank" rel="external">Docker学习笔记</a></p>
<p><a href="https://docs.docker.com/samples/" target="_blank" rel="external">Docker samples</a></p>
<p><a href="http://www.dockerinfo.net/341.html" target="_blank" rel="external">Docker命令指令详情</a><br><a href="http://www.jianshu.com/p/3da0e1bce796" target="_blank" rel="external">http://www.jianshu.com/p/3da0e1bce796</a></p>
<p><a href="https://sematext.com/blog/2016/12/12/docker-elasticsearch-swarm/" target="_blank" rel="external">https://sematext.com/blog/2016/12/12/docker-elasticsearch-swarm/</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-docker-distributed-bigdata/" target="_blank" rel="external">https://www.ibm.com/developerworks/cn/opensource/os-cn-docker-distributed-bigdata/</a></p>
<p><a href="http://blog.daocloud.io/unfhdockerswarm/" target="_blank" rel="external">http://blog.daocloud.io/unfhdockerswarm/</a></p>
<p><a href="https://github.com/hashicorp/raft" target="_blank" rel="external">https://github.com/hashicorp/raft</a></p>
<p><a href="http://shiyanjun.cn/archives/1625.html" target="_blank" rel="external">Docker Swarm架构、特性与基本实践</a></p>
<p><a href="http://www.infoq.com/cn/news/2017/02/docker-1.13" target="_blank" rel="external">docker1.13新特性</a></p>
<p><a href="https://sematext.com/blog/2016/12/12/docker-elasticsearch-swarm/" target="_blank" rel="external">ES cluster of Docker</a></p>
<p><a href="https://yq.aliyun.com/articles/135?spm=5176.100239.blogcont134.9.ufn1ej" target="_blank" rel="external">阿里云Docker博客</a></p>
<h2 id="自然语言处理"><a href="#自然语言处理" class="headerlink" title="自然语言处理"></a>自然语言处理</h2><ul>
<li><a href="http://spaces.ac.cn/archives/4316/?appinstall=0" target="_blank" rel="external">Word2Vec</a> </li>
</ul>
<blockquote>
<p>本文主要是给出了关键词的一种新的定义，并且基于Word2Vec给出了一个实现方案。</p>
</blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/52368821/answer/138745422" target="_blank" rel="external">知乎-知识图谱如何入门</a></li>
</ul>
<blockquote>
<p>任何一个学科，重要的不是静态的知识本身，而是建立知其然（Framework），知其所以然（Rationale），最后到知未然（Insights）</p>
</blockquote>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/26208385" target="_blank" rel="external">金融知识图谱的现状和展望</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzI1NDE1MDUwOQ==&amp;mid=2650796469&amp;idx=1&amp;sn=ac96b8a3c8b0aa8efd73983efde43cd3&amp;chksm=f1c2c3b7c6b54aa1eae085a7bfb790b7814ffedc3e401c4c40d788f75d0d3563ee5c2a066993&amp;mpshare=1&amp;scene=1&amp;srcid=0410SnB1VMKgJMFgKj77SZAZ&amp;key=da7b049fa48f9065a6e5edd50cb00bace41288d1af4b6a68fc3d0182868d83a8542204171759c72e7dc8907195b75da86386371be23c365393c72029d9f97d2ee79df75535d273dc94bdc1b906cbf393&amp;ascene=0&amp;uin=MTM2NDMwMDgyMg%3D%3D&amp;devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.12.3+build(16D32)&amp;version=12010310&amp;nettype=WIFI&amp;fontScale=100&amp;pass_ticket=ZEBBE0sCS5MOoVxyNVyehxmOnuU3Wt%2BrQh8%2Bz0FI9cg6koZnQpy0Kg0LtbI6G1df" target="_blank" rel="external">https://mp.weixin.qq.com/s?__biz=MzI1NDE1MDUwOQ==&amp;mid=2650796469&amp;idx=1&amp;sn=ac96b8a3c8b0aa8efd73983efde43cd3&amp;chksm=f1c2c3b7c6b54aa1eae085a7bfb790b7814ffedc3e401c4c40d788f75d0d3563ee5c2a066993&amp;mpshare=1&amp;scene=1&amp;srcid=0410SnB1VMKgJMFgKj77SZAZ&amp;key=da7b049fa48f9065a6e5edd50cb00bace41288d1af4b6a68fc3d0182868d83a8542204171759c72e7dc8907195b75da86386371be23c365393c72029d9f97d2ee79df75535d273dc94bdc1b906cbf393&amp;ascene=0&amp;uin=MTM2NDMwMDgyMg%3D%3D&amp;devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.12.3+build(16D32)&amp;version=12010310&amp;nettype=WIFI&amp;fontScale=100&amp;pass_ticket=ZEBBE0sCS5MOoVxyNVyehxmOnuU3Wt%2BrQh8%2Bz0FI9cg6koZnQpy0Kg0LtbI6G1df</a></li>
</ul>
<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><ul>
<li><a href="https://gavinzhang1.gitbooks.io/spring/content/" target="_blank" rel="external">Spring源码阅读</a></li>
<li><a href="https://www.zhihu.com/question/21346206" target="_blank" rel="external">知乎-怎么阅读Spring源码？</a></li>
<li><a href="https://my.oschina.net/kaywu123/blog?search=Spring" target="_blank" rel="external">Spring源码分析系列</a></li>
</ul>
<h2 id="分布式系统"><a href="#分布式系统" class="headerlink" title="分布式系统"></a>分布式系统</h2><ul>
<li><a href="http://www.oschina.net/translate/log-what-every-software-engineer-should-know-about-real-time-datas-unifying" target="_blank" rel="external">日志：每个软件工程师都应该知道的有关实时数据的统一概念</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/03/31/spark入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/spark入门/" itemprop="url">
                  spark入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-31T11:22:33+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="先来认识一下spark-shell"><a href="#先来认识一下spark-shell" class="headerlink" title="先来认识一下spark-shell"></a>先来认识一下spark-shell</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">cd spark</div><div class="line">bin/spark-shell</div><div class="line"></div><div class="line"># spark shell 是一个强大的交互式数据分析工具，提供了一个简单的方式来学习 API；</div><div class="line"># spark最主要的抽象就是RDD（所以对RDD要有深刻的理解）</div><div class="line"></div><div class="line"># 一下操作都在spark-shell中操作</div><div class="line"># 使用spark-shell中实例化好的SparkContext创建RDD</div><div class="line">val textFile = sc.textFile(&quot;README.md&quot;)</div><div class="line"></div><div class="line"># RDD有两类重要的功能，actions（可以从RDD中返回值的能力）和transformations（可以从RDD中变换成新的RDD的能力）</div><div class="line">textFile.count()    # action</div><div class="line">val linesWithSpark = textFile.filter(line =&gt; line.contains(&quot;Spark&quot;))  # transformation</div><div class="line"></div><div class="line">textFile.filter(line =&gt; line.contains(&quot;Spark&quot;)).count()  # 组合在一起搞</div></pre></td></tr></table></figure>
<h3 id="独立的应用程序"><a href="#独立的应用程序" class="headerlink" title="独立的应用程序"></a>独立的应用程序</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></div><div class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span>._</div><div class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkConf</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">SimpleApp</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</div><div class="line">    <span class="keyword">val</span> logFile = <span class="string">"YOUR_SPARK_HOME/README.md"</span> <span class="comment">// 应该是你系统上的某些文件</span></div><div class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"Simple Application"</span>)</div><div class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</div><div class="line">    <span class="keyword">val</span> logData = sc.textFile(logFile, <span class="number">2</span>).cache()</div><div class="line">    <span class="keyword">val</span> numAs = logData.filter(line =&gt; line.contains(<span class="string">"a"</span>)).count()</div><div class="line">    <span class="keyword">val</span> numBs = logData.filter(line =&gt; line.contains(<span class="string">"b"</span>)).count()</div><div class="line">    println(<span class="string">"Lines with a: %s, Lines with b: %s"</span>.format(numAs, numBs))</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用sbt打包后，提交给spark执行</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/03/31/Our-team-and-I/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/Our-team-and-I/" itemprop="url">
                  团队与团队管理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-31T10:22:02+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote><p>在团队推进项目的过程中，一个非常重要的原则是：一定要让工作可见、让进度可见，可见是对everyone and everything。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://shniu.github.io/2017/03/30/elasticsearch配置说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shniu<niushaohan@digcredit.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChainTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/30/elasticsearch配置说明/" itemprop="url">
                  elasticsearch配置说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-30T15:47:48+08:00">
                2017-03-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote><p>持续运行的服务，需要我们持续不断的监控，需要对日志的实时分析</p>
</blockquote>
<p>elasticsearch.yml 是elasticsearch的重要配置文件</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 配置es的集群名称，默认是elasticsearch，es会自动发现在同一网段下的es，如果在同一网段下有多个集群，就可以用这个属性来区分不同的集群</span></div><div class="line">cluster.name: elasticsearch</div><div class="line"></div><div class="line"><span class="comment"># 节点名，默认随机指定一个name列表中名字，该列表在es的jar包中config文件夹里name.txt文件中，其中有很多作者添加的有趣名字</span></div><div class="line">node.name: demo</div><div class="line"></div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="shniu<niushaohan@digcredit.com>" />
          <p class="site-author-name" itemprop="name">shniu<niushaohan@digcredit.com></p>
           
              <p class="site-description motion-element" itemprop="description">一个人并不是生来要给打败的，你尽可以的消灭他，可就是打不败他</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shniu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shniu<niushaohan@digcredit.com></span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
